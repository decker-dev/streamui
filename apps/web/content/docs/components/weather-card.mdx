---
title: Weather Card
description: A streaming weather card component that displays real-time weather data from AI.
---

A complete example of a streaming UI component that fetches and displays weather data using AI SDK's `useObject` hook.

## Demo

<DemoPreview>
  <WeatherCardDemo />
</DemoPreview>

## Installation

<Tabs items={["CLI", "Manual"]}>
  <Tab value="CLI">

```bash
npx shadcn@latest add https://stream.ui/r/weather-card.json
```

  </Tab>
  <Tab value="Manual">

<Steps>
  <Step>
    ### Install dependencies

```bash
npm install @stream.ui/react @ai-sdk/react ai zod lucide-react
```

  </Step>
  <Step>
    ### Copy the schema

```tsx title="weather-card-schema.ts"
import { z } from "zod";

export const weatherConditions = [
  "sunny",
  "cloudy",
  "rainy",
  "snowy",
  "windy",
  "stormy",
  "foggy",
  "partly_cloudy",
] as const;

export type WeatherCondition = (typeof weatherConditions)[number];

export const weatherCardSchema = z.object({
  location: z.string().describe("City name"),
  temperature: z.number().describe("Temperature in Celsius"),
  condition: z.enum(weatherConditions).describe("Weather condition"),
  humidity: z.number().nullable().describe("Humidity percentage"),
  windSpeed: z.number().nullable().describe("Wind speed in km/h"),
  forecast: z
    .array(
      z.object({
        day: z.string().describe("Day name (e.g., Mon, Tue)"),
        high: z.number().describe("High temperature"),
        low: z.number().describe("Low temperature"),
        condition: z.enum(weatherConditions),
      }),
    )
    .nullable()
    .describe("3-day forecast"),
});

export type WeatherCardData = z.infer<typeof weatherCardSchema>;
```

  </Step>
  <Step>
    ### Copy the component

Copy the WeatherCard component from the source.

  </Step>
  <Step>
    ### Create the API route

```tsx title="app/api/stream/weather/route.ts"
import { gateway, Output, streamText } from "ai";
import { weatherCardSchema } from "@/components/weather-card-schema";

export async function POST(request: Request) {
  const { prompt } = await request.json();

  const result = streamText({
    model: gateway("openai/gpt-4.1-mini"),
    output: Output.object({ schema: weatherCardSchema }),
    system: `You are a weather data generator. Generate realistic weather data for the requested location.`,
    prompt: `Generate weather data for: ${prompt}`,
  });

  return result.toTextStreamResponse();
}
```

  </Step>
</Steps>

  </Tab>
</Tabs>

## Usage

```tsx
"use client";

import { experimental_useObject as useObject } from "@ai-sdk/react";
import { WeatherCard, weatherCardSchema } from "@/components/weather-card";

export function MyWeatherWidget() {
  const { object, submit, isLoading, error } = useObject({
    api: "/api/stream/weather",
    schema: weatherCardSchema,
  });

  return (
    <div>
      <WeatherCard
        data={object ?? undefined}
        isLoading={isLoading}
        error={error ?? undefined}
      />
      <button onClick={() => submit({ prompt: "Tokyo" })}>
        Get Tokyo Weather
      </button>
    </div>
  );
}
```

## Features

- **Progressive Loading**: Shows skeletons that match the exact dimensions of final content
- **State Indicators**: Border color changes based on streaming state (yellow → blue → green)
- **Zero Layout Shift**: All elements have reserved space to prevent content jumping
- **Weather Icons**: Dynamic icons based on weather condition
- **3-Day Forecast**: Streamed array rendered with `Stream.List`

## Anatomy

The component uses Stream UI primitives internally:

```tsx
<Stream.Root data={data} isLoading={isLoading} error={error}>
  {/* Simple field - renders value directly */}
  <div className="text-xl font-semibold">
    <Stream.Field path="location" fallback={<Skeleton className="h-7 w-32" />} />
  </div>

  {/* With render function to transform value */}
  <div className="text-6xl font-bold">
    <Stream.Field path="temperature" fallback={<Skeleton className="h-16 w-28" />}>
      {(temp) => <>{Math.round(temp)}°</>}
    </Stream.Field>
  </div>

  {/* Arrays - Stream.List with render function */}
  <Stream.List path="forecast" fallback={<ForecastSkeleton />}>
    {(forecast) => forecast.map(day => <ForecastDay key={day.day} day={day} />)}
  </Stream.List>
</Stream.Root>
```

## API Reference

### WeatherCard Props

| Prop | Type | Default |
| --- | --- | --- |
| `data` | `DeepPartial<WeatherCardData> \| undefined` | — |
| `isLoading` | `boolean` | — |
| `error` | `Error \| undefined` | — |

### WeatherCardData Schema

| Field | Type | Description |
| --- | --- | --- |
| `location` | `string` | City name |
| `temperature` | `number` | Temperature in Celsius |
| `condition` | `WeatherCondition` | Current weather condition |
| `humidity` | `number \| null` | Humidity percentage |
| `windSpeed` | `number \| null` | Wind speed in km/h |
| `forecast` | `ForecastDay[] \| null` | 3-day forecast array |

### WeatherCondition

```ts
type WeatherCondition =
  | "sunny"
  | "cloudy"
  | "rainy"
  | "snowy"
  | "windy"
  | "stormy"
  | "foggy"
  | "partly_cloudy";
```

