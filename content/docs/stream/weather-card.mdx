---
title: Weather Card
description: A streaming weather card component that renders progressively as AI generates the data.
---

import { WeatherCard, WeatherCardDemo } from "@/registry/stream";

<Callout type="info">
  This component demonstrates streaming UI with AI SDK 6. It uses `streamText` with `Output.object()` to progressively render weather data as it streams from the AI model.
</Callout>

## Interactive Demo

Try it live! Enter a city name or click one of the quick-select buttons to see the weather card stream in real-time.

<ComponentPreview>
  <WeatherCardDemo />
</ComponentPreview>

## Preview

<ComponentPreview component="weather-card" example="preview">
  <div className="w-full max-w-sm mx-auto">
    <WeatherCard
      data={{
        location: "San Francisco",
        temperature: 18,
        condition: "cloudy",
        humidity: 72,
        windSpeed: 15,
        forecast: [
          { day: "Mon", high: 20, low: 14, condition: "sunny" },
          { day: "Tue", high: 19, low: 13, condition: "cloudy" },
          { day: "Wed", high: 17, low: 12, condition: "rainy" },
        ],
      }}
    />
  </div>
</ComponentPreview>

## Installation

<Tabs items={["CLI", "Manual"]}>
  <Tab value="CLI">
```bash
npx shadcn@latest add "https://streamui.dev/r/weather-card.json"
```
  </Tab>
  <Tab value="Manual">

```tsx title="components/stream/weather-card.tsx"
"use client";

import { cva, type VariantProps } from "class-variance-authority";
import { Cloud, CloudRain, CloudSnow, Sun, Wind, Droplets } from "lucide-react";
import * as React from "react";
import { z } from "zod";
import { cn } from "@/lib/utils";

export const weatherCardSchema = z.object({
  location: z.string().describe("City name"),
  temperature: z.number().describe("Temperature in Celsius"),
  condition: z.enum(["sunny", "cloudy", "rainy", "snowy", "windy"]),
  humidity: z.number().optional().describe("Humidity percentage"),
  windSpeed: z.number().optional().describe("Wind speed in km/h"),
  forecast: z.array(z.object({
    day: z.string(),
    high: z.number(),
    low: z.number(),
    condition: z.enum(["sunny", "cloudy", "rainy", "snowy", "windy"]),
  })).optional(),
});

// ... component code
```

  </Tab>
</Tabs>

## Examples

### Static Data

Pass complete data to render without streaming.

<ComponentPreview component="weather-card" example="basic">
  <div className="w-full max-w-sm mx-auto">
    <WeatherCard
      data={{
        location: "Tokyo",
        temperature: 22,
        condition: "sunny",
        humidity: 65,
        windSpeed: 8,
        forecast: [
          { day: "Mon", high: 24, low: 18, condition: "sunny" },
          { day: "Tue", high: 23, low: 17, condition: "cloudy" },
          { day: "Wed", high: 21, low: 16, condition: "rainy" },
        ],
      }}
    />
  </div>
</ComponentPreview>

### Loading State

Use `isLoading` to show skeleton placeholders.

<ComponentPreview component="weather-card" example="loading">
  <div className="w-full max-w-sm mx-auto">
    <WeatherCard isLoading />
  </div>
</ComponentPreview>

### Progressive Rendering

As data streams in, the component updates progressively.

<ComponentPreview component="weather-card" example="partial">
  <div className="w-full max-w-sm mx-auto">
    <WeatherCard
      data={{
        location: "London",
        temperature: 12,
        condition: "rainy",
      }}
    />
  </div>
</ComponentPreview>

### Elevated Variant

Use `variant="elevated"` for more visual prominence.

<ComponentPreview component="weather-card" example="elevated">
  <div className="w-full max-w-sm mx-auto">
    <WeatherCard
      variant="elevated"
      data={{
        location: "Sydney",
        temperature: 28,
        condition: "sunny",
        humidity: 55,
        windSpeed: 20,
        forecast: [
          { day: "Mon", high: 30, low: 22, condition: "sunny" },
          { day: "Tue", high: 29, low: 21, condition: "sunny" },
          { day: "Wed", high: 27, low: 20, condition: "cloudy" },
        ],
      }}
    />
  </div>
</ComponentPreview>

## Usage with AI SDK

### API Route

Create an API route that uses `streamText` with `Output.object()`:

```tsx title="app/api/stream/weather/route.ts"
import { streamText, Output, gateway } from "ai";
import { weatherCardSchema } from "@/components/stream/weather-card";

export async function POST(request: Request) {
  const { prompt } = await request.json();

  const result = streamText({
    model: gateway("google/gemini-2.0-flash"),
    output: Output.object({ schema: weatherCardSchema }),
    system: `Generate realistic weather data for the requested location.`,
    prompt: `Generate weather data for: ${prompt}`,
  });

  return result.toUIMessageStreamResponse();
}
```

### Client Component

Use `experimental_useObject` to consume the structured output stream:

```tsx title="components/weather-demo.tsx"
"use client";

import { experimental_useObject as useObject } from "@ai-sdk/react";
import { WeatherCard, weatherCardSchema } from "@/components/stream/weather-card";

export function WeatherDemo() {
  const { object, submit, isLoading, error } = useObject({
    api: "/api/stream/weather",
    schema: weatherCardSchema,
  });

  return (
    <div>
      <WeatherCard data={object ?? undefined} isLoading={isLoading && !object} />
      
      {error && <p>Error: {error.message}</p>}
      
      <form onSubmit={(e) => {
        e.preventDefault();
        const formData = new FormData(e.currentTarget);
        submit({ prompt: formData.get("city") });
      }}>
        <input name="city" placeholder="Enter city…" />
        <button type="submit">Get Weather</button>
      </form>
    </div>
  );
}
```

## API Reference

### WeatherCard

The main component for displaying weather data.

| Prop | Type | Default |
| --- | --- | --- |
| `data` | `Partial<WeatherCardData>` | — |
| `isLoading` | `boolean` | `false` |
| `variant` | `"default" \| "elevated"` | `"default"` |

### WeatherCardData (Schema)

The Zod schema for weather data. Use this with `Output.object()`.

| Property | Type | Required |
| --- | --- | --- |
| `location` | `string` | Yes |
| `temperature` | `number` | Yes |
| `condition` | `"sunny" \| "cloudy" \| "rainy" \| "snowy" \| "windy"` | Yes |
| `humidity` | `number` | No |
| `windSpeed` | `number` | No |
| `forecast` | `Array<ForecastDay>` | No |

### ForecastDay

| Property | Type |
| --- | --- |
| `day` | `string` |
| `high` | `number` |
| `low` | `number` |
| `condition` | `WeatherCondition` |
